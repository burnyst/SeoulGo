<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="plandata">
	<!-- parameter, result가 한 개이면  자바의 데이터타입명시
	           여러개이면   VO(DTO), Map으로 처리해야 한다-->
  <!-- sql요소는 다른 구문에서 재사용가능한 SQL 구문을 정의할 때 사용된다. 
  		선언형식<sql id="id값">쿼리문</sql>
  		참조형식 <include refid=”id값”/>
  		    
			예시 <sql id=”userColumns”> id,username,password </sql>
					select <include refid=”userColumns”/>
					from some_table  
  -->	
 	

	<select id="plandatat" resultType="pdto">
	select  PLANNO AS planNo,
			PLANDATE AS planDate,
			PLANTITLE AS planTitle,
			PLANCATE AS planCate,
			MEMBERID AS memberid 
    from plan order by plan.planno desc
	</select>
	<!-- 목록조회 -->
	<select id="planview" resultType="pdto">
		select PLANNO,
		PLANDATE,
		PLANTITLE,
		PLANCATE,
		MEMBERID FROM plan
		where PLANNO=#{pno}
	</select>
	
	<select id="planplaceview" resultType="string">
		select 
		addr1,
		addr2 from place 
		where PLACENO=#{placeNo}
	</select>
	
	<select id="planSview" parameterType="pdto" resultType="java.util.List">
	    SELECT 
	    	   PLANTITLE,
	    	   PLANCATE,
	    	   ADDR1,
	    	   ADDR2
	    	   MEMBERID FROM plan,PLACE,planplace
	    	   WHERE PLACE.PLACENO = planplace.${placeNo}
	</select>
	<!-- INSERT INTO "SEOULMATE"."PLAN" (PLANNO, PLANDATE, PLANTITLE, PLANCATE, MEMBERID) 
	VALUES ('3', TO_DATE('2020-07-15 12:31:27', 'YYYY-MM-DD HH24:MI:SS'), 'plantitle3', '4', 'test')
	 -->
	<insert id="planinsert" parameterType="pdto">
		<selectKey keyProperty="planNo" resultType="int" order="BEFORE">
			select NVL(MAX(planNo),0)+1 from plan
		</selectKey>
		insert into plan (PLANNO,PLANDATE,PLANTITLE,PLANCATE,MEMBERID)
		VALUES(#{planNo},#{planDate},#{planTitle},#{planCate},#{memberid})
	</insert>
	<update id="planupdate" parameterType="pdto">
		update plan
		set PLANDATE=#{planDate},PLANTITLE=#{planTitle},PLANCATE=#{planCate}
		WHERE PLANNO=#{planNo}
	</update>
	<!-- values( #{no}, #{oriName},#{saveName},#{len},#{path} ) -->
	<!-- select   NVL(MAX(bNo),0)+1   from  fileBoard -->
	<!-- 전체게시물 수 조회 -->
	
</mapper>	






